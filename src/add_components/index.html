<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Status Update</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
</head>
<body>

    <div id="sidebar-placeholder"></div>
    
<main>
    <div class="content-container">
    <section id="component-update-form">
        <h1>Components Statuspage Update</h1>
        <p id="csv-upload-note">
            <strong>Note:</strong> For CSV uploads, please ensure proper formatting.
            <br> 
            <a href="javascript:void(0);" id="csv-instructions-link">View CSV instructions</a>.
        </p>

        <div id="loadingMessage" style="display: none;">Processing...</div>

        <div id="errorMessage" style="color: red; display: none;"></div>

        <form id="componentForm">
            <label for="authToken">Authorization Token:</label>
            <input type="text" id="authToken" name="authToken" placeholder="Enter Auth Token" required>

            <label for="statusPageId">Status Page ID:</label>
            <input type="text" id="statusPageId" name="statusPageId" placeholder="Enter Status Page ID" required>

            <div id="componentFieldsContainer"> <!-- Changed from class to id for easier JS targeting -->
                <label for="componentName">Component Name:</label>
                <input type="text" id="componentName" name="componentName" placeholder="Enter Component Name">

                <label for="componentGroup">Component Group:</label>
                <input type="text" id="componentGroup" name="componentGroup" placeholder="Enter Component Group">
            </div>

            <label for="csvFileUpload">Upload CSV File:</label>
            <input type="file" id="csvFileUpload" accept=".csv">
            <small id="optionalCsvText">Optional: Upload a CSV file for bulk update</small>

            <div id="csvUploadMessage" style="display: none;"></div> <!-- Message container for CSV upload confirmation -->

            <button type="submit">Submit</button>
        </form>
    </section>
        <div class="instructions-container" style="display:none;">
            <h2>CSV Upload Instructions:</h2>
            <ul>
                <li><strong>Component</strong> The name of the funtionality being added to your Statuspage. This must already exist in your catalog.</li>
                <li><strong>Component Group:</strong> Name of Component group. This must be created in FireHydrant first.</li>
            </ul>
        </div>
    </div>

    <div id="add-instructions">
    <a href="../component_node_app_example_snippet.txt" download="fh_node_component_example.txt" class="download-btn">Download Node.js Snippet Example</a>
    <p>This text file offers a demonstration of how to upload a CSV file for processing and to add the associated components and component groups inside of a node app. Make sure to update with your FH Bot token, Statuspage Id, and the path to your CSV file. It's also important to verify that the CSV is properly formatted. Carefully examine the contents before executing this script, as it is only a guide. Any modifications you make to your Firehydrant account using this script are solely your responsibility.
    </p>
    <p>
        To install the <code>axios</code> and <code>csv-parse</code> dependencies for your Node.js project using npm: 
        <ol>
            <li>Open your terminal.</li>
            <li>Navigate to your project directory.</li>
            <li>Run <code>npm init</code> to create a <code>package.json</code> file, if you haven't already.</li>
            <li>Install <code>axios</code> by running <code>npm install axios</code>.</li>
            <li>Install <code>csv-parse</code> by running <code>npm install csv-parse</code>.</li>
        </ol>
        Note: The <code>fs</code> module is a built-in Node.js module and does not require separate installation.
    </p>
    
    </div>  
</main>
</body>
</html>
